[supervisord]
nodaemon=true
logfile=/dev/null
logfile_maxbytes=0
pidfile=/var/run/supervisord.pid

[program:slurmd]
priority=1
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
command=/opt/bin/slurm/slurmd_entrypoint.sh
autostart=true
autorestart=true
startretries=3

stopasgroup=true      ; Send SIGTERM to all child processes of supervisord 
killasgroup=true      ; Send SIGKILL to all child processes of supervisord
stopsignal=SIGTERM    ; Signal to send to the program to stop it
stopwaitsecs=10       ; Wait for the process to stop before sending a SIGKILL

[program:sshd]
priority=10
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
command=/opt/bin/slurm/sshd_entrypoint.sh
autostart=true
autorestart=true
startretries=3

stopasgroup=true      ; Send SIGTERM to all child processes of supervisord 
killasgroup=true      ; Send SIGKILL to all child processes of supervisord
stopsignal=SIGTERM    ; Signal to send to the program to stop it
stopwaitsecs=10       ; Wait for the process to stop before sending a SIGKILL
