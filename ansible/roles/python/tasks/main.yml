---

- name: Ensure required packages are installed
  ansible.builtin.apt:
    name:
      - python3.12=3.12.3-1ubuntu0.8
      - python3.12-dev=3.12.3-1ubuntu0.8
      - python3.12-venv=3.12.3-1ubuntu0.8
      - python3.12-dbg=3.12.3-1ubuntu0.8
      - python3-pip=24.0+dfsg-1ubuntu1.3
      - python3-pip-whl=24.0+dfsg-1ubuntu1.3
      - python3-debian=0.1.49ubuntu2
    state: present
    update_cache: true
  tags:
    - python

- name: Create symlink for python
  ansible.builtin.file:
    src: /usr/bin/python3.12
    dest: "{{ item.dst }}"
    mode: "0755"
    force: true
    owner: root
    group: root
    state: link
  loop:
    - dst: /usr/bin/python
    - dst: /usr/bin/python3
